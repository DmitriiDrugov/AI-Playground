(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();function B(t){return Array.isArray(t)||ArrayBuffer.isView(t)}function re(t){return t!=null&&typeof t.GetEnumerator=="function"}function oe(t){return t!=null&&typeof t.CompareTo=="function"}function se(t){return t!=null&&typeof t.Equals=="function"}function ie(t){return t!=null&&typeof t.GetHashCode=="function"}function le(t){return t!=null&&typeof t.Dispose=="function"}function S(t){le(t)&&t.Dispose()}function N(){return null}function Bt(t,e){var n,r;return((n=Object.getPrototypeOf(t))==null?void 0:n.constructor)===((r=Object.getPrototypeOf(e))==null?void 0:r.constructor)}class ce{constructor(e){this.iter=e,this.current=N()}"System.Collections.Generic.IEnumerator`1.get_Current"(){return this.current}"System.Collections.IEnumerator.get_Current"(){return this.current}"System.Collections.IEnumerator.MoveNext"(){const e=this.iter.next();return this.current=e.value,!e.done}"System.Collections.IEnumerator.Reset"(){throw new Error("JS iterators cannot be reset")}Dispose(){}}function E(t){return re(t)?t.GetEnumerator():new ce(t[Symbol.iterator]())}function mt(t){return{next(){const e=t["System.Collections.IEnumerator.MoveNext"](),n=e?t["System.Collections.Generic.IEnumerator`1.get_Current"]():void 0;return{done:!e,value:n}}}}function Nt(t,e){return t.toString(10).padStart(e,"0")}function xt(t){const e=t;return typeof e.offset=="number"?e.offset:t.kind===1?0:t.getTimezoneOffset()*-6e4}class T{static id(e){return T.idMap.has(e)||T.idMap.set(e,++T.count),T.idMap.get(e)}}T.idMap=new WeakMap;T.count=0;function kt(t){let e=0,n=5381;const r=t.length;for(;e<r;)n=n*33^t.charCodeAt(e++);return n}function Tt(t){return t*2654435761|0}function ue(t){return kt(t.toString(32))}function gt(t){let e=0;const n=t.length;for(let r=0;r<n;r++){const o=t[r];e=(e<<5)+e^o}return e}function ae(t){return t.getTime()}function fe(t){const e=t.length,n=new Array(e);for(let r=0;r<e;r++)n[r]=tt(t[r]);return gt(n)}function tt(t){var e;if(t==null)return 0;switch(typeof t){case"boolean":return t?1:0;case"number":return Tt(t);case"bigint":return ue(t);case"string":return kt(t);default:{if(ie(t))return t.GetHashCode();if(B(t))return fe(t);if(t instanceof Date)return ae(t);if(((e=Object.getPrototypeOf(t))==null?void 0:e.constructor)===Object){const n=Object.values(t).map(r=>tt(r));return gt(n)}else return Tt(T.id(t))}}}function de(t,e,n){if(t==null)return e==null;if(e==null||t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(!n(t[r],e[r]))return!1;return!0}function Q(t,e){return de(t,e,I)}function he(t,e){const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;n.sort(),r.sort();for(let o=0;o<n.length;o++)if(n[o]!==r[o]||!I(t[n[o]],e[r[o]]))return!1;return!0}function I(t,e){var n;return t===e?!0:t==null?e==null:e==null?!1:se(t)?t.Equals(e):B(t)?B(e)&&Q(t,e):typeof t!="object"?!1:t instanceof Date?e instanceof Date&&Ft(t,e)===0:((n=Object.getPrototypeOf(t))==null?void 0:n.constructor)===Object&&he(t,e)}function Ft(t,e){let n,r;return"offset"in t&&"offset"in e?(n=t.getTime(),r=e.getTime()):(n=t.getTime()+xt(t),r=e.getTime()+xt(e)),n===r?0:n<r?-1:1}function jt(t,e){return t===e?0:t<e?-1:1}function me(t,e,n){if(t==null)return e==null?0:1;if(e==null)return-1;if(t.length!==e.length)return t.length<e.length?-1:1;for(let r=0,o=0;r<t.length;r++)if(o=n(t[r],e[r]),o!==0)return o;return 0}function ge(t,e){return me(t,e,k)}function pe(t,e){const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return n.length<r.length?-1:1;n.sort(),r.sort();for(let o=0,s=0;o<n.length;o++){const i=n[o];if(i!==r[o])return i<r[o]?-1:1;if(s=k(t[i],e[i]),s!==0)return s}return 0}function k(t,e){var n;return t===e?0:t==null?e==null?0:-1:e==null?1:oe(t)?t.CompareTo(e):B(t)?B(e)?ge(t,e):-1:typeof t!="object"?t<e?-1:1:t instanceof Date?e instanceof Date?Ft(t,e):-1:((n=Object.getPrototypeOf(t))==null?void 0:n.constructor)===Object?pe(t,e):-1}function x(t){let e=t;return(...n)=>{if(n.length===0)return e;e=n[0]}}function be(t,e,n,r,o){if(ArrayBuffer.isView(t)&&ArrayBuffer.isView(n))n.set(t.subarray(e,e+o),r);else for(let s=0;s<o;++s)n[r+s]=t[e+s]}function ye(t){let e=0,n="[";for(const r of t){if(e===0)n+=j(r);else if(e===100){n+="; ...";break}else n+="; "+j(r);e++}return n+"]"}function j(t,e=0){var n;if(t!=null&&typeof t=="object"){if(typeof t.toString=="function")return t.toString();if(Symbol.iterator in t)return ye(t);{const r=(n=Object.getPrototypeOf(t))==null?void 0:n.constructor;return r===Object&&e<10?"{ "+Object.entries(t).map(([o,s])=>o+" = "+j(s,e+1)).join(`
  `)+" }":(r==null?void 0:r.name)??""}}return String(t)}function we(t){const e={},n=Object.keys(t);for(let r=0;r<n.length;r++)e[n[r]]=t[n[r]];return e}function Ee(t){return"{ "+Object.entries(t).map(([e,n])=>e+" = "+j(n)).join(`
  `)+" }"}function Ce(t){const e=Object.values(t).map(n=>tt(n));return gt(e)}function ve(t,e){if(t===e)return!0;if(Bt(t,e)){const n=Object.keys(t);for(let r=0;r<n.length;r++)if(!I(t[n[r]],e[n[r]]))return!1;return!0}else return!1}function _e(t,e){if(t===e)return 0;if(Bt(t,e)){const n=Object.keys(t);for(let r=0;r<n.length;r++){const o=k(t[n[r]],e[n[r]]);if(o!==0)return o}return 0}else return-1}class pt{toJSON(){return we(this)}toString(){return Ee(this)}GetHashCode(){return Ce(this)}Equals(e){return ve(this,e)}CompareTo(e){return _e(this,e)}}class Se{get contents(){return this.getter()}set contents(e){this.setter(e)}constructor(e,n){typeof n=="function"?(this.getter=e,this.setter=n):(this.getter=()=>e,this.setter=r=>{e=r})}}const G=Symbol("numeric");function Ie(t){return typeof t=="number"||typeof t=="bigint"||(t==null?void 0:t[G])}function Ne(t,e){return typeof t=="number"||typeof t=="bigint"?t<e?-1:t>e?1:0:t.CompareTo(e)}function xe(t,e){return typeof t=="number"?t*e:typeof t=="bigint"?t*BigInt(e):t[G]().multiply(e)}function Te(t,e){return typeof t=="number"?t.toFixed(e):typeof t=="bigint"?t:t[G]().toFixed(e)}function Mt(t,e){return typeof t=="number"?t.toPrecision(e):typeof t=="bigint"?t:t[G]().toPrecision(e)}function At(t,e){return typeof t=="number"?t.toExponential(e):typeof t=="bigint"?t:t[G]().toExponential(e)}function Ot(t){return typeof t=="number"?(Number(t)>>>0).toString(16):typeof t=="bigint"?BigInt.asUintN(64,t).toString(16):t[G]().toHex()}function Me(t){const e=t<0;t=Math.abs(t);const n=~~(t/36e5),r=t%36e5/6e4;return(e?"-":"+")+Nt(n,2)+":"+Nt(r,2)}function Ae(t,e){return new Date(t.getTime()+(t.offset??0)).toISOString().replace(/\.\d+/,"").replace(/[A-Z]|\.\d+/g," ")+Me(t.offset??0)}function Oe(t,e){return t.kind===1?t.toUTCString():t.toLocaleString()}function Pe(t,e,n){return t.offset!=null?Ae(t):Oe(t)}const $=/(^|[^%])%([0+\- ]*)(\*|\d+)?(?:\.(\d+))?(\w)/g;function Le(t,e){return Ne(t,e)<0}function Z(t){return{input:t,cont:Fe(t)}}function Be(t,e){return typeof e=="string"?t(e):e.cont(t)}function X(t){return Be(e=>e,t)}function ke(t,e,n,r,o){let s="";if(e=e||"",o=o||"",Ie(t))switch(o.toLowerCase()!=="x"&&(Le(t,0)?(t=xe(t,-1),s="-"):e.indexOf(" ")>=0?s=" ":e.indexOf("+")>=0&&(s="+")),r=r==null?null:parseInt(r,10),o){case"f":case"F":r=r??6,t=Te(t,r);break;case"g":case"G":t=r!=null?Mt(t,r):Mt(t);break;case"e":case"E":t=r!=null?At(t,r):At(t);break;case"x":t=Ot(t);break;case"X":t=Ot(t).toUpperCase();break;default:t=String(t);break}else t instanceof Date?t=Pe(t):t=j(t);if(n=typeof n=="number"?n:parseInt(n,10),isNaN(n))t=s+t;else{const i=e.indexOf("0")>=0,c=e.indexOf("-")>=0,u=c||!i?" ":"0";u==="0"?(t=Pt(t,n-s.length,u,c),t=s+t):t=Pt(s+t,n,u,c)}return t}function Ht(t,e,n,r="",o=-1){return(...s)=>{let i=r;const c=e.slice(),u=n.slice();for(const a of s){const[,,f,d,m,h]=u[0];let g=d;if(o>=0)g=o,o=-1;else if(g==="*"){if(a<0)throw new Error("Non-negative number required");o=a;continue}i+=c[0],i+=ke(a,f,g,m,h),c.splice(0,1),u.splice(0,1)}return u.length===0?(i+=c[0],t(i)):Ht(t,c,u,i,o)}}function Fe(t){return e=>{$.lastIndex=0;const n=[],r=[];let o=0,s=$.exec(t);for(;s;){const i=s.index+(s[1]||"").length;n.push(t.substring(o,i).replace(/%%/g,"%")),r.push(s),o=$.lastIndex,$.lastIndex-=1,s=$.exec(t)}return n.length===0?e(t.replace(/%%/g,"%")):(n.push(t.substring(o).replace(/%%/g,"%")),Ht(e,n,r))}}function je(t,e){return Array.isArray(e)?e.join(t):Array.from(e).join(t)}function Pt(t,e,n,r){n=n||" ",e=e-t.length;for(let o=0;o<e;o++)t=r?t+n:n+t;return t}class H{constructor(e){this.value=e}toJSON(){return this.value}toString(){return String(this.value)}GetHashCode(){return tt(this.value)}Equals(e){return e==null?!1:I(this.value,e instanceof H?e.value:e)}CompareTo(e){return e==null?1:k(this.value,e instanceof H?e.value:e)}}function b(t){if(t==null)throw new Error("Option has no value");return t instanceof H?t.value:t}function O(t){return t==null||t instanceof H?new H(t):t}const He="The index was outside the range of elements in the collection.",zt="Collection was empty.";function bt(t,e){return new Array(e)}function ze(t,e){if(t!=null&&/\S/.test(t)){const n=+t.replace("_","");if(!Number.isNaN(n))return e.contents=n,!0}return!1}function Re(t){const e=new Se(0);if(ze(t,e))return e.contents;throw new Error(`The input string ${t} was not in a correct format.`)}function z(t,e,n,r){const o=e|0;return t.fill(r,o,o+n)}function Ge(t,e,n){const r=e.length|0,o=bt(n,r);for(let s=0;s<=r-1;s++)yt(o,s,t(s,l(s,e)));return o}function qe(t,e){const n=bt(e,1);return yt(n,0,t),n}function F(t,e,n){if(t<0)throw new Error("The input must be non-negative\\nParameter name: count");const r=bt(n,t);for(let o=0;o<=t-1;o++)yt(r,o,e(o));return r}function ft(t,e,n,r,o){be(t,e,n,r,o)}function Rt(t,e,n){const r=e.slice();return r.sort((o,s)=>n.Compare(t(o),t(s))),r}function l(t,e){if(t<0||t>=e.length)throw new Error("Index was outside the bounds of the array.\\nParameter name: index");return e[t]}function yt(t,e,n){if(e<0||e>=t.length)throw new Error("Index was outside the bounds of the array.\\nParameter name: index");t[e]=n}class J extends pt{constructor(e,n){super(),this.head=e,this.tail=n}toString(){return"["+je("; ",this)+"]"}Equals(e){const n=this;return n===e?!0:((o,s)=>{t:for(;;){const i=o,c=s,u=i.tail,a=c.tail;if(u!=null)if(a!=null){const f=b(u),d=b(a);if(I(i.head,c.head)){o=f,s=d;continue t}else return!1}else return!1;else return a==null}})(n,e)}GetHashCode(){return((r,o,s)=>{t:for(;;){const i=r,c=o,u=s,a=u.tail;if(a!=null){const f=b(a);if(i>18)return c|0;r=i+1,o=(c<<1)+tt(u.head)+631*i,s=f;continue t}else return c|0}})(0,0,this)|0}toJSON(){const e=this;return Array.from(e)}CompareTo(e){return((o,s)=>{t:for(;;){const i=o,c=s,u=i.tail,a=c.tail;if(u!=null)if(a!=null){const f=b(u),d=b(a),m=k(i.head,c.head)|0;if(m===0){o=f,s=d;continue t}else return m|0}else return 1;else return a!=null?-1:0}})(this,e)|0}GetEnumerator(){return De(this)}[Symbol.iterator](){return mt(E(this))}"System.Collections.IEnumerable.GetEnumerator"(){return E(this)}}class Ve{constructor(e){this.xs=e,this.it=this.xs,this.current=N()}"System.Collections.Generic.IEnumerator`1.get_Current"(){return this.current}"System.Collections.IEnumerator.get_Current"(){return this.current}"System.Collections.IEnumerator.MoveNext"(){const e=this,n=e.it.tail;if(n!=null){const r=b(n);return e.current=e.it.head,e.it=r,!0}else return!1}"System.Collections.IEnumerator.Reset"(){const e=this;e.it=e.xs,e.current=N()}Dispose(){}}function De(t){return new Ve(t)}function K(){return new J(N(),void 0)}function wt(t,e){return new J(t,e)}function $e(t){return t.tail==null}function We(t){return((n,r)=>{t:for(;;){const o=n,i=r.tail;if(i!=null){n=o+1,r=b(i);continue t}else return o|0}})(0,t)|0}function Qe(t){if(t.tail!=null)return t.head;throw new Error(zt+"\\nParameter name: list")}function Gt(t){const e=t.tail;if(e!=null)return b(e);throw new Error(zt+"\\nParameter name: list")}function Ze(t,e){return((r,o)=>{t:for(;;){const s=r,i=o,c=i.tail;if(c!=null){if(s===e)return i.head;r=s+1,o=b(c);continue t}else throw new Error(He+"\\nParameter name: index")}})(0,t)}function qt(){return K()}function Vt(t,e){return wt(t,e)}function Xe(t){return wt(t,K())}function st(t){return We(t)}function Je(t){return Qe(t)}function Ke(t,e,n){let r=e,o=n;for(;!$e(o);)r=t(r,Je(o)),o=Gt(o);return r}function Ye(t,e){Ke((n,r)=>{t(r)},void 0,e)}function Ue(t,e){let n=e;for(let r=t.length-1;r>=0;r--)n=wt(l(r,t),n);return n}function Et(t){return Ue(t,K())}function tn(t){let e,n;if(B(t))return Et(t);if(t instanceof J)return t;{const r=K();let o=r;const s=E(t);try{for(;s["System.Collections.IEnumerator.MoveNext"]();){const u=s["System.Collections.Generic.IEnumerator`1.get_Current"]();o=(e=o,n=new J(u,void 0),e.tail=n,n)}}finally{S(s)}const i=o,c=K();return i.tail=c,Gt(r)}}function Dt(t,e){return Ze(e,t)}function en(t){throw new Error(t)}const nn="Enumeration already finished.",rn="Enumeration has not started. Call MoveNext.",on="Reset is not supported on this enumerator.";function sn(){throw new Error(on)}function Ct(){throw new Error(rn)}function ht(){throw new Error(nn)}class ln{constructor(e){this.f=e}toString(){const e=this;let n=0,r="seq [";const o=E(e);try{for(;n<4&&o["System.Collections.IEnumerator.MoveNext"]();)n>0&&(r=r+"; "),r=r+j(o["System.Collections.Generic.IEnumerator`1.get_Current"]()),n=n+1|0;return n===4&&(r=r+"; ..."),r+"]"}finally{S(o)}}GetEnumerator(){return this.f()}[Symbol.iterator](){return mt(E(this))}"System.Collections.IEnumerable.GetEnumerator"(){return this.f()}}function cn(t){return new ln(t)}class un{constructor(e,n,r){this.current=e,this.next=n,this.dispose=r}"System.Collections.Generic.IEnumerator`1.get_Current"(){return this.current()}"System.Collections.IEnumerator.get_Current"(){return this.current()}"System.Collections.IEnumerator.MoveNext"(){return this.next()}"System.Collections.IEnumerator.Reset"(){sn()}Dispose(){this.dispose()}}function vt(t,e,n){return new un(t,e,n)}function an(t){let e,n,r=!1,o=!1,s;const i=()=>{if(o=!0,n!=null){const c=b(n);try{S(c)}finally{n=void 0}}if(e!=null){const c=b(e);try{S(c)}finally{e=void 0}}};return vt(()=>(r?o&&ht():Ct(),s!=null?b(s):ht()),()=>{let c;if(r||(r=!0),o)return!1;{let u;for(;u==null;){const a=e,f=n;if(a!=null)if(f!=null){const d=b(f);if(d["System.Collections.IEnumerator.MoveNext"]())s=O(d["System.Collections.Generic.IEnumerator`1.get_Current"]()),u=!0;else try{S(d)}finally{n=void 0}}else{const d=b(a);d["System.Collections.IEnumerator.MoveNext"]()?n=(c=d["System.Collections.Generic.IEnumerator`1.get_Current"](),E(c)):(i(),u=!1)}else e=E(t)}return b(u)}},()=>{o||i()})}function fn(t,e,n){let r=!1,o,s=O(t());const i=()=>{if(s!=null){const u=b(s);try{n(u)}finally{s=void 0}}},c=()=>{try{i()}finally{o=void 0}};return vt(()=>(r||Ct(),o!=null?b(o):ht()),()=>{if(r||(r=!0),s!=null){const u=b(s);let a;try{a=e(u)}catch(f){throw c(),f}return a!=null?(o=a,!0):(c(),!1)}else return!1},i)}function dn(t,e){let n,r=e;return vt(()=>{if(n!=null){const o=b(n)[0];return b(n)[1],o}else return Ct()},()=>(n=t(r),n!=null?(b(n)[0],r=b(n)[1],!0):!1),()=>{})}function hn(t,e){e==null&&en(t)}function ct(t){return cn(t)}function mn(t){return hn("source",t),E(t)}function M(t){return ct(()=>E(t()))}function _t(t){return ct(()=>an(t))}function $t(t,e){return ct(()=>dn(t,e))}function Wt(){return M(()=>new Array(0))}function Qt(t){return M(()=>qe(t))}function gn(t){return B(t)?Et(t):t instanceof J?t:tn(t)}function pn(t,e,n){return ct(()=>fn(t,e,n))}function bn(t,e){return _t([t,e])}function yn(t,e){return _t($t(n=>t()?[e,n+1]:void 0,0))}function wn(t,e){return pn(()=>mn(e),n=>n["System.Collections.IEnumerator.MoveNext"]()?O(t(n["System.Collections.Generic.IEnumerator`1.get_Current"]())):void 0,n=>{S(n)})}function Lt(t,e){return M(()=>_t(wn(t,e)))}function En(t,e,n,r){const o=k(t,n)|0;if(o===0)throw new Error("The step of a range cannot be zero");const s=o>0;return i=>{const c=k(i,e)|0;return s&&c<=0||!s&&c>=0?[i,r(i,t)]:void 0}}function Cn(t,e,n,r,o){const s=En(e,n,r,o);return M(()=>$t(s,t))}function it(t,e,n){return Cn(t,e,n,0,(r,o)=>r+o)}function vn(){return Math.random()}function dt(t,e){if(e<t)throw new Error("minValue must be less than maxValue");return Math.floor(Math.random()*(e-t))+t}function _n(t){if(t==null)throw new Error("Buffer cannot be null");for(let e=0;e<t.length;e+=6){let n=Math.floor(Math.random()*281474976710656);const r=Math.floor(n/16777216);for(let o=0;o<6&&e+o<t.length;o++)o===3&&(n=r),t[e+o]=n&255,n>>>=8}}class Sn{constructor(){}Next0(){return dt(0,2147483647)}Next1(e){return dt(0,e)}Next2(e,n){return dt(e,n)}NextDouble(){return vn()}NextBytes(e){_n(e)}}function In(){return new Sn}function Zt(){return In()}class Nn{constructor(e,n){this.contents=e,this.count=n|0,this.head=0,this.tail=(n===this.contents.length?0:n)|0}GetEnumerator(){return E(On(this))}[Symbol.iterator](){return mt(E(this))}"System.Collections.IEnumerable.GetEnumerator"(){return E(this)}}function xn(t,e){return new Nn(t,e)}function Tn(t){return xn(z(new Array(t),0,t,null),0)}function Xt(){return Tn(4)}function Jt(t){return t.count}function lt(t,e){t.count===P(t)&&An(t,t.count+1),t.contents[t.tail]=e,t.tail=(t.tail+1)%P(t)|0,t.count=t.count+1|0}function Kt(t){if(t.count===0)throw new Error("Queue is empty");const e=l(t.head,t.contents);return t.head=(t.head+1)%P(t)|0,t.count=t.count-1|0,e}function P(t){return t.contents.length}function Mn(t,e){return(t.head+e)%P(t)}function An(t,e){const n=z(new Array(e),0,e,null);t.head<t.tail?ft(t.contents,t.head,n,0,t.count):(ft(t.contents,t.head,n,0,P(t)-t.head),ft(t.contents,0,n,P(t)-t.head,t.tail)),t.head=0,t.contents=n,t.tail=(t.count===P(t)?0:t.count)|0}function On(t){return M(()=>{let e=0;return yn(()=>e<t.count,M(()=>bn(Qt(l(Mn(t,e),t.contents)),M(()=>(e=e+1|0,Wt())))))})}function Pn(t){const e=document.createElement("canvas");return e.className="border border-blue-300 bg-white",e.id="perceptron-canvas",e.width=700,e.height=500,e.addEventListener("click",n=>{const r=n,o=e.getBoundingClientRect(),s=r.clientX-o.left,i=r.clientY-o.top;t([s/e.width*2-1,-(i/e.height*2-1),0])}),e.addEventListener("contextmenu",n=>{n.preventDefault();const r=n,o=e.getBoundingClientRect(),s=r.clientX-o.left,i=r.clientY-o.top;t([s/e.width*2-1,-(i/e.height*2-1),1])}),e}function Ln(){const t=document.createElement("div");t.className="relative w-full flex items-center justify-center h-16 bg-white mb-4";const e=document.createElement("h1");e.className="text-3xl font-bold text-blue-700",e.textContent="AI Playground: Perceptron & Maze Solver";const n=document.createElement("button");return n.className="absolute right-6 top-1/2 transform -translate-y-1/2 bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 shadow",n.textContent="Help",n.id="btn-help",t.appendChild(e),t.appendChild(n),t}function Bn(){const t=document.createElement("div");t.className="flex flex-col md:flex-row gap-6 items-start justify-center w-full max-w-6xl";const e=document.createElement("div");return e.className="bg-white border shadow rounded p-4 w-64 text-sm",e.id="metrics-container",e.innerHTML=`
        <h2 class="font-semibold mb-2">Confusion Matrix</h2>
        <table class="table-auto text-sm text-center w-full border">
            <thead>
                <tr>
                    <th></th>
                    <th>Pred 0</th>
                    <th>Pred 1</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <th>Actual 0</th>
                    <td class="border">TN<br><strong>0</strong></td>
                    <td class="border">FP<br><strong>0</strong></td>
                </tr>
                <tr>
                    <th>Actual 1</th>
                    <td class="border">FN<br><strong>0</strong></td>
                    <td class="border">TP<br><strong>0</strong></td>
                </tr>
            </tbody>
        </table>
        <div id="training-log" class="text-xs whitespace-pre-wrap font-mono bg-white p-2 border rounded mt-4 max-h-48 overflow-y-auto"></div>
    `,t.appendChild(e),t}function kn(){const t=document.createElement("div");t.className="w-full max-w-4xl flex flex-col md:flex-row gap-4";const e=document.createElement("div");e.className="flex-1 bg-white p-4 rounded shadow border border-gray-300 flex flex-col gap-2";const n=document.createElement("button");n.className="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",n.textContent="Train",n.id="btn-train";const r=document.createElement("button");r.className="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",r.textContent="Reset",r.id="btn-reset";const o=document.createElement("button");o.className="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",o.textContent="Random weight",o.id="btn-random";const s=document.createElement("input");s.setAttribute("type","file"),s.setAttribute("accept",".csv"),s.className="px-2 py-1 border rounded text-sm",s.id="csv-input",Ye(u=>{e.appendChild(u)},Et([n,r,o,s]));const i=document.createElement("div");i.className="flex-1 bg-white p-4 rounded shadow border border-gray-300",i.id="settings-box";const c=`
    <div class="text-sm text-gray-800 space-y-2">
      <label class="block">
        <span class="text-gray-600 font-medium">Learning rate: <span id="lr-display">0.1</span></span>
        <input id="learning-rate-input" type="range" step="0.01" min="0.01" max="1" value="0.1"
          class="mt-1 block w-full cursor-pointer" oninput="document.getElementById('lr-display').innerText = this.value" />
      </label>
      <div id="weights-display" class="pt-2"></div>
    </div>
    `;return i.innerHTML=c,t.appendChild(e),t.appendChild(i),t}class Fn extends pt{constructor(e,n,r){super(),this.X=e,this.Y=n,this.Class=r|0}}let R=x(qt()),C=x(new Float64Array([.5,.5])),A=x(0),Yt=x(.1),W=x(!1),ot=x(!1),_=x([new Int32Array([0])]),Y=x([0,0]),U=x([0,0]);function jn(){const t=document.getElementById("learning-rate-input");if(t!=null){const e=t;e.addEventListener("input",n=>{const r=Re(e.value);Number.isNaN(r)||Yt(r)})}else console.warn(O("⚠️ learning-rate-input не найден"))}function et(){let t,e,n;const r=document.getElementById("weights-display");I(r,N())||(r.innerHTML=(t=l(0,C()),e=l(1,C()),n=A(),X(Z(`
            <div><strong>w0:</strong> %.4f</div>
            <div><strong>w1:</strong> %.4f</div>
            <div><strong>bias:</strong> %.4f</div>
            `))(t)(e)(n)))}function Hn(){let t=0,e=0,n=0,r=0;const o=E(R());try{for(;o["System.Collections.IEnumerator.MoveNext"]();){const s=o["System.Collections.Generic.IEnumerator`1.get_Current"](),i=new Float64Array([s.X,s.Y]),c=(l(0,i)*l(0,C())+l(1,i)*l(1,C())+A()>=0?1:0)|0,u=s.Class|0;let a;switch(u){case 0:{switch(c){case 0:{a=1;break}case 1:{a=2;break}default:a=4}break}case 1:{switch(c){case 0:{a=3;break}case 1:{a=0;break}default:a=4}break}default:a=4}switch(a){case 0:{t=t+1|0;break}case 1:{e=e+1|0;break}case 2:{n=n+1|0;break}case 3:{r=r+1|0;break}}}}finally{S(o)}return[t,n,r,e]}function nt(){const t=document.getElementById("metrics-container");if(!I(t,N())){const e=Hn(),n=`
            <h2 class="font-semibold mb-2">Confusion Matrix</h2>
            <table class="table-auto text-sm text-center w-full border">
                <thead>
                    <tr>
                        <th></th>
                        <th>Pred 0</th>
                        <th>Pred 1</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <th>Actual 0</th>
                        <td class="border">TN<br><strong>${e[3]}</strong></td>
                        <td class="border">FP<br><strong>${e[1]}</strong></td>
                    </tr>
                    <tr>
                        <th>Actual 1</th>
                        <td class="border">FN<br><strong>${e[2]}</strong></td>
                        <td class="border">TP<br><strong>${e[0]}</strong></td>
                    </tr>
                </tbody>
            </table>
            `,r=t.querySelector("#confusion-table");if(r==null){const o=document.createElement("div");o.id="confusion-table",o.innerHTML=n,t.innerHTML="",t.appendChild(o);const s=document.createElement("div");s.id="training-log",s.className="text-xs whitespace-pre-wrap font-mono bg-white p-2 border rounded mt-4 max-h-48 overflow-y-auto",t.appendChild(s)}else r.innerHTML=n}}function zn(t){const e=document.getElementById("training-log");I(e,N())||(e.innerHTML=e.innerHTML+t+"<br>")}function Rn(){const t=document.getElementById("perceptron-canvas"),e=t.getContext("2d"),n=l(0,C()),r=l(1,C());if(r!==0){const o=u=>-(n/r)*u-A()/r,s=u=>[(u[0]+1)/2*t.width,(1-(u[1]+1)/2)*t.height],i=s([-1,o(-1)]),c=s([1,o(1)]);e.beginPath(),e.moveTo(i[0],i[1]),e.lineTo(c[0],c[1]),e.strokeStyle="black",e.lineWidth=2,e.stroke()}}function ut(){let t,e;const n=document.getElementById("perceptron-canvas"),r=n.getContext("2d"),o=~~n.width|0,s=~~n.height|0;r.clearRect(0,0,n.width,n.height);const i=E(it(0,4,o-1));try{for(;i["System.Collections.IEnumerator.MoveNext"]();){const u=i["System.Collections.Generic.IEnumerator`1.get_Current"]()|0,a=E(it(0,4,s-1));try{for(;a["System.Collections.IEnumerator.MoveNext"]();){const f=a["System.Collections.Generic.IEnumerator`1.get_Current"]()|0,d=-(f/s*2-1),m=(u/o*2-1)*l(0,C())+d*l(1,C())+A(),h=1/(1+Math.exp(-m));r.fillStyle=h>=.5?X(Z("rgba(220,38,38,%.2f)"))(h):(t=1-h,X(Z("rgba(37,99,235,%.2f)"))(t)),r.fillRect(u,f,4,4)}}finally{S(a)}}}finally{S(i)}const c=E(R());try{for(;c["System.Collections.IEnumerator.MoveNext"]();){const u=c["System.Collections.Generic.IEnumerator`1.get_Current"](),a=(u.X+1)/2*n.width,f=(1-(u.Y+1)/2)*n.height;r.beginPath(),r.arc(a,f,5,0,2*3.141592653589793),r.fillStyle=(e=u.Class|0,e===0?"#2563eb":e===1?"#dc2626":"#000000"),r.fill()}}finally{S(c)}Rn()}class Gn extends pt{constructor(e,n){super(),this.visited=e,this.walls=n}}function qn(t,e){const n=Zt(),r=F(t,h=>F(e,g=>new Gn(!1,[!0,!0,!0,!0]))),o=[[0,-1],[-1,0],[0,1],[1,0]],s=[[3,1],[0,2],[1,3],[2,0]],i=(h,g)=>{l(g,l(h,r)).visited=!0;const w=Ge((p,y)=>[p,y[0],y[1]],Rt(p=>n.Next0(),o,{Compare:jt}));for(let p=0;p<=w.length-1;p++){const y=l(p,w),v=y[0]|0,V=h+y[1]|0,D=g+y[2]|0;if(V>=0&&D>=0&&V<t&&D<e&&!l(D,l(V,r)).visited){const ne=l(v,s);l(g,l(h,r)).walls[v]=!1,l(D,l(V,r)).walls[ne[1]]=!1,i(V,D)}}};i(0,0);const c=t*2+1|0,u=e*2+1|0,a=F(c,h=>z(new Int32Array(u),0,u,1));for(let h=0;h<=t-1;h++)for(let g=0;g<=e-1;g++){const w=l(g,l(h,r)),p=h*2+1|0,y=g*2+1|0;l(p,a)[y]=0,l(0,w.walls)||(l(p-1,a)[y]=0),l(1,w.walls)||(l(p,a)[y+1]=0),l(2,w.walls)||(l(p+1,a)[y]=0),l(3,w.walls)||(l(p,a)[y-1]=0)}const f=[1,1];l(f[0],a)[f[1]]=0;const d=gn(M(()=>Lt(h=>Lt(g=>l(g,l(h,a))===0&&!Q([h,g],f)?Qt([h,g]):Wt(),it(2,1,u-3)),it(2,1,c-3)))),m=st(d)>0?Dt(n.Next1(st(d)),d):f;return l(m[0],a)[m[1]]=0,[a,f,m]}function Ut(t,e){let n,r,o,s;t:for(;;){const i=t,c=e,u=qn(i,c),a=u[1],f=u[0],d=u[2];if(n=F(f.length,m=>z(new Array(l(0,f).length),0,l(0,f).length,!1)),r=Xt(),lt(r,a),l(a[0],n)[a[1]]=!0,o=[[0,-1],[-1,0],[0,1],[1,0]],s=!1,(()=>{for(;Jt(r)>0&&!s;){const m=Kt(r);for(let h=0;h<=o.length-1;h++){const g=l(h,o),w=m[0]+g[0]|0,p=m[1]+g[1]|0;w>=0&&p>=0&&w<f.length&&p<l(0,f).length&&l(p,l(w,f))===0&&!l(p,l(w,n))&&(l(w,n)[p]=!0,lt(r,[w,p]),Q([w,p],d)&&(s=!0))}}})(),s)return[f,a,d];t=i,e=c;continue t}}const St=Ut(8,14),Vn=St[1],Dn=St[0],$n=St[2];_(Dn);Y(Vn);U($n);function te(){const t=document.getElementById("maze-canvas"),e=t.getContext("2d"),n=_().length|0,r=l(0,_()).length|0,o=t.width/r;e.clearRect(0,0,t.width,t.height);for(let a=0;a<=n-1;a++)for(let f=0;f<=r-1;f++){const d=f*o,m=a*o;e.fillStyle=l(f,l(a,_()))===1?"#000000":"#ffffff",e.fillRect(d,m,o,o),e.strokeStyle="#cccccc",e.strokeRect(d,m,o,o)}const s=U()[1]|0,i=U()[0]|0;i>=0&&i<n&&s>=0&&s<r&&l(s,l(i,_()))===0&&(e.fillStyle="red",e.beginPath(),e.arc(s*o+o/2,i*o+o/2,o/3,0,2*3.141592653589793),e.fill());const c=Y()[1]|0,u=Y()[0]|0;u>=0&&u<n&&c>=0&&c<r&&l(c,l(u,_()))===0&&(e.fillStyle="limegreen",e.beginPath(),e.arc(c*o+o/2,u*o+o/2,o/3,0,2*3.141592653589793),e.fill())}function Wn(t,e){const n=t.getContext("2d"),r=t.width/l(0,_()).length,o=s=>{if(s<st(e)){const i=Dt(s,e),c=i[1]*r+r/2,u=i[0]*r+r/2;n.fillStyle="limegreen",n.beginPath(),n.arc(c,u,r/4,0,2*3.141592653589793),n.fill(),window.setTimeout(()=>{o(s+1)},100)}};o(0)}function Qn(){if(ot())console.warn(O("Maze is currently being solved."));else{ot(!0);const t=document.getElementById("maze-canvas");t.getContext("2d");const e=_().length|0,n=l(0,_()).length|0,r=Y(),o=U(),s=F(e,d=>z(new Array(n),0,n,!1)),i=F(e,d=>z(new Array(n),0,n,void 0)),c=Xt();lt(c,r),l(r[0],s)[r[1]]=!0;const u=[[0,-1],[-1,0],[0,1],[1,0]],a=Zt();let f=!1;for(;Jt(c)>0&&!f;){const d=Kt(c),m=d[0]|0,h=d[1]|0,g=Rt(w=>a.Next0(),u,{Compare:jt});for(let w=0;w<=g.length-1;w++){const p=l(w,g),y=m+p[0]|0,v=h+p[1]|0;y>=0&&v>=0&&y<e&&v<n&&l(v,l(y,_()))===0&&!l(v,l(y,s))&&(l(y,s)[v]=!0,l(y,i)[v]=[m,h],lt(c,[y,v]),Q([y,v],o)&&(f=!0))}}if(f){let d=Xe(o),m=o;for(;!Q(m,r);){const h=l(m[1],l(m[0],i));if(h==null)throw new Error("No path");{const g=h;d=Vt(g,d),m=g}}Wn(t,d),window.setTimeout(()=>{ot(!1)},st(d)*100+200)}else console.warn(O("No path found")),ot(!1)}}function Zn(t,e,n){R(Vt(new Fn(t,e,n),R())),ut(),et(),nt()}function ee(t){let e,n,r,o=!1;const s=E(R());try{for(;s["System.Collections.IEnumerator.MoveNext"]();){const i=s["System.Collections.Generic.IEnumerator`1.get_Current"](),c=new Float64Array([i.X,i.Y]),u=i.Class-(l(0,c)*l(0,C())+l(1,c)*l(1,C())+A()>=0?1:0);if(u!==0){o=!0;const a=Yt();C()[0]=l(0,C())+a*u*l(0,c),C()[1]=l(1,C())+a*u*l(1,c),A(A()+a*u),zn((e=a*u*l(0,c),n=a*u*l(1,c),r=a*u,X(Z("Epoch %d: Δw0 = %.4f, Δw1 = %.4f, Δb = %.4f"))(t)(e)(n)(r)))}}}finally{S(s)}if(ut(),et(),nt(),o&&t<200)window.requestAnimationFrame(i=>{ee(t+1)});else{const i=o?"Training stopped after 200 epochs with some errors.":"Training completed successfully without errors!";window.alert(O(i))}}function Xn(){if(W())Qn();else{const t=document.getElementById("training-log");I(t,N())||(t.innerHTML=""),ee(0)}}function Jn(){const t=()=>Math.random()*2-1;C(new Float64Array([t(),t()])),A(t()),ut(),et(),nt()}function Kn(){if(W()){const t=Ut(8,14);_(t[0]),Y(t[1]),U(t[2]),te()}else R(qt()),ut(),et(),nt()}function at(t,e){const n=document.getElementById(t);n==null?console.warn(O(X(Z("Element with id '%s' not found"))(t))):n.addEventListener("click",r=>{e()})}function Yn(){const t=document.getElementById("help-modal");if(!I(t,N()))t.classList.contains("hidden")?t.classList.remove("hidden"):t.classList.add("hidden");else{const n=document.getElementById("btn-help").getBoundingClientRect(),r=document.createElement("div");r.id="help-modal",r.className="absolute bg-white rounded p-6 shadow-lg border w-[32rem] z-50 text-sm leading-relaxed",r.setAttribute("style",`top:${n.bottom+10}px;left:${n.left-320}px;`),r.innerHTML=`
            <h2 class="text-xl font-semibold mb-3">About this Project</h2>
<p>This interactive project demonstrates two classic AI approaches in action:</p>

<h3 class="font-semibold mt-4">🧠 Perceptron Mode</h3>
<p>A perceptron is a basic neural unit that learns to separate 2D points into two classes using linear boundaries.</p>
<ul class="list-disc list-inside mt-1">
  <li>Click on canvas to add blue (Class 0) or red (Class 1) points</li>
  <li>Train the perceptron to learn the boundary</li>
  <li>The decision boundary is shown as a black line</li>
  <li>The background color indicates prediction confidence</li>
</ul>

<h3 class="font-semibold mt-4">🧩 Maze Mode</h3>
<p>In this mode, an agent uses Breadth-First Search (BFS) to solve a procedurally generated maze.</p>
<ul class="list-disc list-inside mt-1">
  <li>Click <b>Train</b> to start pathfinding</li>
  <li>The green dot animates as it finds the path</li>
  <li>All mazes are guaranteed to have one valid solution</li>
</ul>

<h3 class="font-semibold mt-4">🛠️ Tech Stack</h3>
<ul class="list-disc list-inside mt-1">
  <li>F# + Fable (compiled to JavaScript)</li>
  <li>HTML Canvas</li>
  <li>Tailwind CSS</li>
</ul>

<p class="mt-4">Made by Dmitrii Drugov – HFAA90</p>
<button id="close-help" class="mt-4 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700">Close</button>

            `,document.body.appendChild(r),r.querySelector("#close-help").addEventListener("click",s=>{r.classList.add("hidden")})}}const Un=Pn(t=>{Zn(t[0],t[1],t[2])}),rt=document.createElement("canvas");rt.id="maze-canvas";(function(){rt.setAttribute("width","600")})();(function(){rt.setAttribute("height","400")})();rt.className="hidden border rounded bg-white";const tr=Ln(),It=Bn(),er=kn(),q=document.createElement("div");q.className="min-h-screen bg-gray-100 flex flex-col items-center gap-4 pt-10 max-w-screen-xl w-full mx-auto overflow-x-hidden";It.appendChild(Un);It.appendChild(rt);q.appendChild(tr);const L=document.createElement("button");L.textContent="Switch to Maze Mode";L.className="bg-gray-200 px-4 py-2 rounded border shadow hover:bg-gray-300";L.id="btn-switch-mode";L.addEventListener("click",t=>{W(!W());const e=document.getElementById("perceptron-canvas"),n=document.getElementById("maze-canvas");W()?(L.textContent="Switch to Perceptron Mode",e.classList.add("hidden"),n.classList.remove("hidden"),te()):(L.textContent="Switch to Maze Mode",n.classList.add("hidden"),e.classList.remove("hidden"))});q.appendChild(L);q.appendChild(It);q.appendChild(er);document.getElementById("root").appendChild(q);at("btn-train",()=>{Xn()});at("btn-reset",()=>{Kn()});at("btn-random",()=>{Jn()});at("btn-help",()=>{Yn()});jn();et();nt();
