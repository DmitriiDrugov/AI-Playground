(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();function Q(t){return Array.isArray(t)||ArrayBuffer.isView(t)}function Yt(t){return t!=null&&typeof t.GetEnumerator=="function"}function Ut(t){return t!=null&&typeof t.CompareTo=="function"}function te(t){return t!=null&&typeof t.Equals=="function"}function ee(t){return t!=null&&typeof t.GetHashCode=="function"}function ne(t){return t!=null&&typeof t.Dispose=="function"}function N(t){ne(t)&&t.Dispose()}function T(){return null}function Tt(t,e){var n,r;return((n=Object.getPrototypeOf(t))==null?void 0:n.constructor)===((r=Object.getPrototypeOf(e))==null?void 0:r.constructor)}class re{constructor(e){this.iter=e,this.current=T()}"System.Collections.Generic.IEnumerator`1.get_Current"(){return this.current}"System.Collections.IEnumerator.get_Current"(){return this.current}"System.Collections.IEnumerator.MoveNext"(){const e=this.iter.next();return this.current=e.value,!e.done}"System.Collections.IEnumerator.Reset"(){throw new Error("JS iterators cannot be reset")}Dispose(){}}function C(t){return Yt(t)?t.GetEnumerator():new re(t[Symbol.iterator]())}function lt(t){return{next(){const e=t["System.Collections.IEnumerator.MoveNext"](),n=e?t["System.Collections.Generic.IEnumerator`1.get_Current"]():void 0;return{done:!e,value:n}}}}function wt(t,e){return t.toString(10).padStart(e,"0")}function Et(t){const e=t;return typeof e.offset=="number"?e.offset:t.kind===1?0:t.getTimezoneOffset()*-6e4}class A{static id(e){return A.idMap.has(e)||A.idMap.set(e,++A.count),A.idMap.get(e)}}A.idMap=new WeakMap;A.count=0;function Mt(t){let e=0,n=5381;const r=t.length;for(;e<r;)n=n*33^t.charCodeAt(e++);return n}function Ct(t){return t*2654435761|0}function oe(t){return Mt(t.toString(32))}function ct(t){let e=0;const n=t.length;for(let r=0;r<n;r++){const o=t[r];e=(e<<5)+e^o}return e}function se(t){return t.getTime()}function ie(t){const e=t.length,n=new Array(e);for(let r=0;r<e;r++)n[r]=J(t[r]);return ct(n)}function J(t){var e;if(t==null)return 0;switch(typeof t){case"boolean":return t?1:0;case"number":return Ct(t);case"bigint":return oe(t);case"string":return Mt(t);default:{if(ee(t))return t.GetHashCode();if(Q(t))return ie(t);if(t instanceof Date)return se(t);if(((e=Object.getPrototypeOf(t))==null?void 0:e.constructor)===Object){const n=Object.values(t).map(r=>J(r));return ct(n)}else return Ct(A.id(t))}}}function le(t,e,n){if(t==null)return e==null;if(e==null||t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(!n(t[r],e[r]))return!1;return!0}function it(t,e){return le(t,e,I)}function ce(t,e){const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;n.sort(),r.sort();for(let o=0;o<n.length;o++)if(n[o]!==r[o]||!I(t[n[o]],e[r[o]]))return!1;return!0}function I(t,e){var n;return t===e?!0:t==null?e==null:e==null?!1:te(t)?t.Equals(e):Q(t)?Q(e)&&it(t,e):typeof t!="object"?!1:t instanceof Date?e instanceof Date&&At(t,e)===0:((n=Object.getPrototypeOf(t))==null?void 0:n.constructor)===Object&&ce(t,e)}function At(t,e){let n,r;return"offset"in t&&"offset"in e?(n=t.getTime(),r=e.getTime()):(n=t.getTime()+Et(t),r=e.getTime()+Et(e)),n===r?0:n<r?-1:1}function Ot(t,e){return t===e?0:t<e?-1:1}function ae(t,e,n){if(t==null)return e==null?0:1;if(e==null)return-1;if(t.length!==e.length)return t.length<e.length?-1:1;for(let r=0,o=0;r<t.length;r++)if(o=n(t[r],e[r]),o!==0)return o;return 0}function ue(t,e){return ae(t,e,B)}function fe(t,e){const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return n.length<r.length?-1:1;n.sort(),r.sort();for(let o=0,s=0;o<n.length;o++){const i=n[o];if(i!==r[o])return i<r[o]?-1:1;if(s=B(t[i],e[i]),s!==0)return s}return 0}function B(t,e){var n;return t===e?0:t==null?e==null?0:-1:e==null?1:Ut(t)?t.CompareTo(e):Q(t)?Q(e)?ue(t,e):-1:typeof t!="object"?t<e?-1:1:t instanceof Date?e instanceof Date?At(t,e):-1:((n=Object.getPrototypeOf(t))==null?void 0:n.constructor)===Object?fe(t,e):-1}function M(t){let e=t;return(...n)=>{if(n.length===0)return e;e=n[0]}}function de(t,e,n,r,o){if(ArrayBuffer.isView(t)&&ArrayBuffer.isView(n))n.set(t.subarray(e,e+o),r);else for(let s=0;s<o;++s)n[r+s]=t[e+s]}function he(t){let e=0,n="[";for(const r of t){if(e===0)n+=j(r);else if(e===100){n+="; ...";break}else n+="; "+j(r);e++}return n+"]"}function j(t,e=0){var n;if(t!=null&&typeof t=="object"){if(typeof t.toString=="function")return t.toString();if(Symbol.iterator in t)return he(t);{const r=(n=Object.getPrototypeOf(t))==null?void 0:n.constructor;return r===Object&&e<10?"{ "+Object.entries(t).map(([o,s])=>o+" = "+j(s,e+1)).join(`
  `)+" }":(r==null?void 0:r.name)??""}}return String(t)}function me(t){const e={},n=Object.keys(t);for(let r=0;r<n.length;r++)e[n[r]]=t[n[r]];return e}function pe(t){return"{ "+Object.entries(t).map(([e,n])=>e+" = "+j(n)).join(`
  `)+" }"}function ge(t){const e=Object.values(t).map(n=>J(n));return ct(e)}function be(t,e){if(t===e)return!0;if(Tt(t,e)){const n=Object.keys(t);for(let r=0;r<n.length;r++)if(!I(t[n[r]],e[n[r]]))return!1;return!0}else return!1}function ye(t,e){if(t===e)return 0;if(Tt(t,e)){const n=Object.keys(t);for(let r=0;r<n.length;r++){const o=B(t[n[r]],e[n[r]]);if(o!==0)return o}return 0}else return-1}class at{toJSON(){return me(this)}toString(){return pe(this)}GetHashCode(){return ge(this)}Equals(e){return be(this,e)}CompareTo(e){return ye(this,e)}}class we{get contents(){return this.getter()}set contents(e){this.setter(e)}constructor(e,n){typeof n=="function"?(this.getter=e,this.setter=n):(this.getter=()=>e,this.setter=r=>{e=r})}}const G=Symbol("numeric");function Ee(t){return typeof t=="number"||typeof t=="bigint"||(t==null?void 0:t[G])}function Ce(t,e){return typeof t=="number"||typeof t=="bigint"?t<e?-1:t>e?1:0:t.CompareTo(e)}function _e(t,e){return typeof t=="number"?t*e:typeof t=="bigint"?t*BigInt(e):t[G]().multiply(e)}function ve(t,e){return typeof t=="number"?t.toFixed(e):typeof t=="bigint"?t:t[G]().toFixed(e)}function _t(t,e){return typeof t=="number"?t.toPrecision(e):typeof t=="bigint"?t:t[G]().toPrecision(e)}function vt(t,e){return typeof t=="number"?t.toExponential(e):typeof t=="bigint"?t:t[G]().toExponential(e)}function St(t){return typeof t=="number"?(Number(t)>>>0).toString(16):typeof t=="bigint"?BigInt.asUintN(64,t).toString(16):t[G]().toHex()}function Se(t){const e=t<0;t=Math.abs(t);const n=~~(t/36e5),r=t%36e5/6e4;return(e?"-":"+")+wt(n,2)+":"+wt(r,2)}function Ie(t,e){return new Date(t.getTime()+(t.offset??0)).toISOString().replace(/\.\d+/,"").replace(/[A-Z]|\.\d+/g," ")+Se(t.offset??0)}function Ne(t,e){return t.kind===1?t.toUTCString():t.toLocaleString()}function xe(t,e,n){return t.offset!=null?Ie(t):Ne(t)}const $=/(^|[^%])%([0+\- ]*)(\*|\d+)?(?:\.(\d+))?(\w)/g;function Te(t,e){return Ce(t,e)<0}function Z(t){return{input:t,cont:Oe(t)}}function Me(t,e){return typeof e=="string"?t(e):e.cont(t)}function X(t){return Me(e=>e,t)}function Ae(t,e,n,r,o){let s="";if(e=e||"",o=o||"",Ee(t))switch(o.toLowerCase()!=="x"&&(Te(t,0)?(t=_e(t,-1),s="-"):e.indexOf(" ")>=0?s=" ":e.indexOf("+")>=0&&(s="+")),r=r==null?null:parseInt(r,10),o){case"f":case"F":r=r??6,t=ve(t,r);break;case"g":case"G":t=r!=null?_t(t,r):_t(t);break;case"e":case"E":t=r!=null?vt(t,r):vt(t);break;case"x":t=St(t);break;case"X":t=St(t).toUpperCase();break;default:t=String(t);break}else t instanceof Date?t=xe(t):t=j(t);if(n=typeof n=="number"?n:parseInt(n,10),isNaN(n))t=s+t;else{const i=e.indexOf("0")>=0,c=e.indexOf("-")>=0,a=c||!i?" ":"0";a==="0"?(t=It(t,n-s.length,a,c),t=s+t):t=It(s+t,n,a,c)}return t}function Pt(t,e,n,r="",o=-1){return(...s)=>{let i=r;const c=e.slice(),a=n.slice();for(const u of s){const[,,h,f,g,w]=a[0];let m=f;if(o>=0)m=o,o=-1;else if(m==="*"){if(u<0)throw new Error("Non-negative number required");o=u;continue}i+=c[0],i+=Ae(u,h,m,g,w),c.splice(0,1),a.splice(0,1)}return a.length===0?(i+=c[0],t(i)):Pt(t,c,a,i,o)}}function Oe(t){return e=>{$.lastIndex=0;const n=[],r=[];let o=0,s=$.exec(t);for(;s;){const i=s.index+(s[1]||"").length;n.push(t.substring(o,i).replace(/%%/g,"%")),r.push(s),o=$.lastIndex,$.lastIndex-=1,s=$.exec(t)}return n.length===0?e(t.replace(/%%/g,"%")):(n.push(t.substring(o).replace(/%%/g,"%")),Pt(e,n,r))}}function Pe(t,e){return Array.isArray(e)?e.join(t):Array.from(e).join(t)}function It(t,e,n,r){n=n||" ",e=e-t.length;for(let o=0;o<e;o++)t=r?t+n:n+t;return t}class H{constructor(e){this.value=e}toJSON(){return this.value}toString(){return String(this.value)}GetHashCode(){return J(this.value)}Equals(e){return e==null?!1:I(this.value,e instanceof H?e.value:e)}CompareTo(e){return e==null?1:B(this.value,e instanceof H?e.value:e)}}function b(t){if(t==null)throw new Error("Option has no value");return t instanceof H?t.value:t}function z(t){return t==null||t instanceof H?new H(t):t}const Le="The index was outside the range of elements in the collection.",Lt="Collection was empty.";function ut(t,e){return new Array(e)}function Be(t,e){if(t!=null&&/\S/.test(t)){const n=+t.replace("_","");if(!Number.isNaN(n))return e.contents=n,!0}return!1}function Fe(t){const e=new we(0);if(Be(t,e))return e.contents;throw new Error(`The input string ${t} was not in a correct format.`)}function R(t,e,n,r){const o=e|0;return t.fill(r,o,o+n)}function ke(t,e,n){const r=e.length|0,o=ut(n,r);for(let s=0;s<=r-1;s++)ft(o,s,t(s,l(s,e)));return o}function je(t,e){const n=ut(e,1);return ft(n,0,t),n}function F(t,e,n){if(t<0)throw new Error("The input must be non-negative\\nParameter name: count");const r=ut(n,t);for(let o=0;o<=t-1;o++)ft(r,o,e(o));return r}function ot(t,e,n,r,o){de(t,e,n,r,o)}function Bt(t,e,n){const r=e.slice();return r.sort((o,s)=>n.Compare(t(o),t(s))),r}function l(t,e){if(t<0||t>=e.length)throw new Error("Index was outside the bounds of the array.\\nParameter name: index");return e[t]}function ft(t,e,n){if(e<0||e>=t.length)throw new Error("Index was outside the bounds of the array.\\nParameter name: index");t[e]=n}class Ft extends at{constructor(e,n){super(),this.head=e,this.tail=n}toString(){return"["+Pe("; ",this)+"]"}Equals(e){const n=this;return n===e?!0:((o,s)=>{t:for(;;){const i=o,c=s,a=i.tail,u=c.tail;if(a!=null)if(u!=null){const h=b(a),f=b(u);if(I(i.head,c.head)){o=h,s=f;continue t}else return!1}else return!1;else return u==null}})(n,e)}GetHashCode(){return((r,o,s)=>{t:for(;;){const i=r,c=o,a=s,u=a.tail;if(u!=null){const h=b(u);if(i>18)return c|0;r=i+1,o=(c<<1)+J(a.head)+631*i,s=h;continue t}else return c|0}})(0,0,this)|0}toJSON(){const e=this;return Array.from(e)}CompareTo(e){return((o,s)=>{t:for(;;){const i=o,c=s,a=i.tail,u=c.tail;if(a!=null)if(u!=null){const h=b(a),f=b(u),g=B(i.head,c.head)|0;if(g===0){o=h,s=f;continue t}else return g|0}else return 1;else return u!=null?-1:0}})(this,e)|0}GetEnumerator(){return ze(this)}[Symbol.iterator](){return lt(C(this))}"System.Collections.IEnumerable.GetEnumerator"(){return C(this)}}class He{constructor(e){this.xs=e,this.it=this.xs,this.current=T()}"System.Collections.Generic.IEnumerator`1.get_Current"(){return this.current}"System.Collections.IEnumerator.get_Current"(){return this.current}"System.Collections.IEnumerator.MoveNext"(){const e=this,n=e.it.tail;if(n!=null){const r=b(n);return e.current=e.it.head,e.it=r,!0}else return!1}"System.Collections.IEnumerator.Reset"(){const e=this;e.it=e.xs,e.current=T()}Dispose(){}}function ze(t){return new He(t)}function dt(){return new Ft(T(),void 0)}function ht(t,e){return new Ft(t,e)}function Re(t){return t.tail==null}function De(t){return((n,r)=>{t:for(;;){const o=n,i=r.tail;if(i!=null){n=o+1,r=b(i);continue t}else return o|0}})(0,t)|0}function Ge(t){if(t.tail!=null)return t.head;throw new Error(Lt+"\\nParameter name: list")}function qe(t){const e=t.tail;if(e!=null)return b(e);throw new Error(Lt+"\\nParameter name: list")}function Ve(t,e){return((r,o)=>{t:for(;;){const s=r,i=o,c=i.tail;if(c!=null){if(s===e)return i.head;r=s+1,o=b(c);continue t}else throw new Error(Le+"\\nParameter name: index")}})(0,t)}function kt(){return dt()}function jt(t,e){return ht(t,e)}function $e(t){return ht(t,dt())}function Ht(t){return De(t)}function We(t){return Ge(t)}function Qe(t,e,n){let r=e,o=n;for(;!Re(o);)r=t(r,We(o)),o=qe(o);return r}function Ze(t,e){Qe((n,r)=>{t(r)},void 0,e)}function Xe(t,e){let n=e;for(let r=t.length-1;r>=0;r--)n=ht(l(r,t),n);return n}function Je(t){return Xe(t,dt())}function Ke(t,e){return Ve(e,t)}const Ye="Enumeration already finished.",Ue="Enumeration has not started. Call MoveNext.",tn="Reset is not supported on this enumerator.";function en(){throw new Error(tn)}function zt(){throw new Error(Ue)}function Nt(){throw new Error(Ye)}class nn{constructor(e){this.f=e}toString(){const e=this;let n=0,r="seq [";const o=C(e);try{for(;n<4&&o["System.Collections.IEnumerator.MoveNext"]();)n>0&&(r=r+"; "),r=r+j(o["System.Collections.Generic.IEnumerator`1.get_Current"]()),n=n+1|0;return n===4&&(r=r+"; ..."),r+"]"}finally{N(o)}}GetEnumerator(){return this.f()}[Symbol.iterator](){return lt(C(this))}"System.Collections.IEnumerable.GetEnumerator"(){return this.f()}}function rn(t){return new nn(t)}class on{constructor(e,n,r){this.current=e,this.next=n,this.dispose=r}"System.Collections.Generic.IEnumerator`1.get_Current"(){return this.current()}"System.Collections.IEnumerator.get_Current"(){return this.current()}"System.Collections.IEnumerator.MoveNext"(){return this.next()}"System.Collections.IEnumerator.Reset"(){en()}Dispose(){this.dispose()}}function Rt(t,e,n){return new on(t,e,n)}function sn(t){let e,n,r=!1,o=!1,s;const i=()=>{if(o=!0,n!=null){const c=b(n);try{N(c)}finally{n=void 0}}if(e!=null){const c=b(e);try{N(c)}finally{e=void 0}}};return Rt(()=>(r?o&&Nt():zt(),s!=null?b(s):Nt()),()=>{let c;if(r||(r=!0),o)return!1;{let a;for(;a==null;){const u=e,h=n;if(u!=null)if(h!=null){const f=b(h);if(f["System.Collections.IEnumerator.MoveNext"]())s=z(f["System.Collections.Generic.IEnumerator`1.get_Current"]()),a=!0;else try{N(f)}finally{n=void 0}}else{const f=b(u);f["System.Collections.IEnumerator.MoveNext"]()?n=(c=f["System.Collections.Generic.IEnumerator`1.get_Current"](),C(c)):(i(),a=!1)}else e=C(t)}return b(a)}},()=>{o||i()})}function ln(t,e){let n,r=e;return Rt(()=>{if(n!=null){const o=b(n)[0];return b(n)[1],o}else return zt()},()=>(n=t(r),n!=null?(b(n)[0],r=b(n)[1],!0):!1),()=>{})}function mt(t){return rn(t)}function k(t){return mt(()=>C(t()))}function Dt(t){return mt(()=>sn(t))}function Gt(t,e){return mt(()=>ln(t,e))}function cn(){return k(()=>new Array(0))}function an(t){return k(()=>je(t))}function un(t,e){return Dt([t,e])}function fn(t,e){return Dt(Gt(n=>t()?[e,n+1]:void 0,0))}function dn(t,e,n,r){const o=B(t,n)|0;if(o===0)throw new Error("The step of a range cannot be zero");const s=o>0;return i=>{const c=B(i,e)|0;return s&&c<=0||!s&&c>=0?[i,r(i,t)]:void 0}}function hn(t,e,n,r,o){const s=dn(e,n,r,o);return k(()=>Gt(s,t))}function xt(t,e,n){return hn(t,e,n,0,(r,o)=>r+o)}function mn(){return Math.random()}function st(t,e){if(e<t)throw new Error("minValue must be less than maxValue");return Math.floor(Math.random()*(e-t))+t}function pn(t){if(t==null)throw new Error("Buffer cannot be null");for(let e=0;e<t.length;e+=6){let n=Math.floor(Math.random()*281474976710656);const r=Math.floor(n/16777216);for(let o=0;o<6&&e+o<t.length;o++)o===3&&(n=r),t[e+o]=n&255,n>>>=8}}class gn{constructor(){}Next0(){return st(0,2147483647)}Next1(e){return st(0,e)}Next2(e,n){return st(e,n)}NextDouble(){return mn()}NextBytes(e){pn(e)}}function bn(){return new gn}function qt(){return bn()}class yn{constructor(e,n){this.contents=e,this.count=n|0,this.head=0,this.tail=(n===this.contents.length?0:n)|0}GetEnumerator(){return C(vn(this))}[Symbol.iterator](){return lt(C(this))}"System.Collections.IEnumerable.GetEnumerator"(){return C(this)}}function wn(t,e){return new yn(t,e)}function En(t){return wn(R(new Array(t),0,t,null),0)}function Vt(){return En(4)}function $t(t){return t.count}function et(t,e){t.count===P(t)&&_n(t,t.count+1),t.contents[t.tail]=e,t.tail=(t.tail+1)%P(t)|0,t.count=t.count+1|0}function Wt(t){if(t.count===0)throw new Error("Queue is empty");const e=l(t.head,t.contents);return t.head=(t.head+1)%P(t)|0,t.count=t.count-1|0,e}function P(t){return t.contents.length}function Cn(t,e){return(t.head+e)%P(t)}function _n(t,e){const n=R(new Array(e),0,e,null);t.head<t.tail?ot(t.contents,t.head,n,0,t.count):(ot(t.contents,t.head,n,0,P(t)-t.head),ot(t.contents,0,n,P(t)-t.head,t.tail)),t.head=0,t.contents=n,t.tail=(t.count===P(t)?0:t.count)|0}function vn(t){return k(()=>{let e=0;return fn(()=>e<t.count,k(()=>un(an(l(Cn(t,e),t.contents)),k(()=>(e=e+1|0,cn())))))})}function Sn(t){const e=document.createElement("canvas");return e.className="border border-blue-300 bg-white",e.id="perceptron-canvas",e.width=700,e.height=500,e.addEventListener("click",n=>{const r=n,o=e.getBoundingClientRect(),s=r.clientX-o.left,i=r.clientY-o.top;t([s/e.width*2-1,-(i/e.height*2-1),0])}),e.addEventListener("contextmenu",n=>{n.preventDefault();const r=n,o=e.getBoundingClientRect(),s=r.clientX-o.left,i=r.clientY-o.top;t([s/e.width*2-1,-(i/e.height*2-1),1])}),e}function In(){const t=document.createElement("div");t.className="relative w-full flex items-center justify-center h-16 bg-white mb-4";const e=document.createElement("h1");e.className="text-3xl font-bold text-blue-700",e.textContent="AI Playground: Perceptron & Maze Solver";const n=document.createElement("button");return n.className="absolute right-6 top-1/2 transform -translate-y-1/2 bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 shadow",n.textContent="Help",n.id="btn-help",t.appendChild(e),t.appendChild(n),t}function Nn(){const t=document.createElement("div");t.className="flex flex-col md:flex-row gap-6 items-start justify-center w-full max-w-6xl";const e=document.createElement("div");return e.className="bg-white border shadow rounded p-4 w-64 text-sm",e.id="metrics-container",e.innerHTML=`\r
        <h2 class="font-semibold mb-2">Confusion Matrix</h2>\r
        <table class="table-auto text-sm text-center w-full border">\r
            <thead>\r
                <tr>\r
                    <th></th>\r
                    <th>Pred 0</th>\r
                    <th>Pred 1</th>\r
                </tr>\r
            </thead>\r
            <tbody>\r
                <tr>\r
                    <th>Actual 0</th>\r
                    <td class="border">TN<br><strong>0</strong></td>\r
                    <td class="border">FP<br><strong>0</strong></td>\r
                </tr>\r
                <tr>\r
                    <th>Actual 1</th>\r
                    <td class="border">FN<br><strong>0</strong></td>\r
                    <td class="border">TP<br><strong>0</strong></td>\r
                </tr>\r
            </tbody>\r
        </table>\r
        <div id="training-log" class="text-xs whitespace-pre-wrap font-mono bg-white p-2 border rounded mt-4 max-h-48 overflow-y-auto"></div>\r
    `,t.appendChild(e),t}function xn(){const t=document.createElement("div");t.className="w-full max-w-4xl flex flex-col md:flex-row gap-4";const e=document.createElement("div");e.className="flex-1 bg-white p-4 rounded shadow border border-gray-300 flex flex-col gap-2";const n=document.createElement("button");n.className="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",n.textContent="Train",n.id="btn-train";const r=document.createElement("button");r.className="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",r.textContent="Reset",r.id="btn-reset";const o=document.createElement("button");o.className="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",o.textContent="Random weight",o.id="btn-random";const s=document.createElement("input");s.setAttribute("type","file"),s.setAttribute("accept",".csv"),s.className="px-2 py-1 border rounded text-sm",s.id="csv-input",Ze(a=>{e.appendChild(a)},Je([n,r,o,s]));const i=document.createElement("div");i.className="flex-1 bg-white p-4 rounded shadow border border-gray-300",i.id="settings-box";const c=`\r
    <div class="text-sm text-gray-800 space-y-2">\r
      <label class="block">\r
        <span class="text-gray-600 font-medium">Learning rate: <span id="lr-display">0.1</span></span>\r
        <input id="learning-rate-input" type="range" step="0.01" min="0.01" max="1" value="0.1"\r
          class="mt-1 block w-full cursor-pointer" oninput="document.getElementById('lr-display').innerText = this.value" />\r
      </label>\r
      <div id="weights-display" class="pt-2"></div>\r
    </div>\r
    `;return i.innerHTML=c,t.appendChild(e),t.appendChild(i),t}class Tn extends at{constructor(e,n,r){super(),this.X=e,this.Y=n,this.Class=r|0}}let D=M(kt()),E=M(new Float64Array([.5,.5])),O=M(0),Qt=M(.1),W=M(!1),tt=M(!1),x=M([new Int32Array([0])]),pt=M([0,0]),gt=M([0,0]);function Mn(){const t=document.getElementById("learning-rate-input");if(t!=null){const e=t;e.addEventListener("input",n=>{const r=Fe(e.value);Number.isNaN(r)||Qt(r)})}else console.warn(z("‚ö†Ô∏è learning-rate-input –Ω–µ –Ω–∞–π–¥–µ–Ω"))}function K(){let t,e,n;const r=document.getElementById("weights-display");I(r,T())||(r.innerHTML=(t=l(0,E()),e=l(1,E()),n=O(),X(Z(`\r
            <div><strong>w0:</strong> %.4f</div>\r
            <div><strong>w1:</strong> %.4f</div>\r
            <div><strong>bias:</strong> %.4f</div>\r
            `))(t)(e)(n)))}function An(){let t=0,e=0,n=0,r=0;const o=C(D());try{for(;o["System.Collections.IEnumerator.MoveNext"]();){const s=o["System.Collections.Generic.IEnumerator`1.get_Current"](),i=new Float64Array([s.X,s.Y]),c=(l(0,i)*l(0,E())+l(1,i)*l(1,E())+O()>=0?1:0)|0,a=s.Class|0;let u;switch(a){case 0:{switch(c){case 0:{u=1;break}case 1:{u=2;break}default:u=4}break}case 1:{switch(c){case 0:{u=3;break}case 1:{u=0;break}default:u=4}break}default:u=4}switch(u){case 0:{t=t+1|0;break}case 1:{e=e+1|0;break}case 2:{n=n+1|0;break}case 3:{r=r+1|0;break}}}}finally{N(o)}return[t,n,r,e]}function Y(){const t=document.getElementById("metrics-container");if(!I(t,T())){const e=An(),n=`
            <h2 class="font-semibold mb-2">Confusion Matrix</h2>
            <table class="table-auto text-sm text-center w-full border">
                <thead>
                    <tr>
                        <th></th>
                        <th>Pred 0</th>
                        <th>Pred 1</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <th>Actual 0</th>
                        <td class="border">TN<br><strong>${e[3]}</strong></td>
                        <td class="border">FP<br><strong>${e[1]}</strong></td>
                    </tr>
                    <tr>
                        <th>Actual 1</th>
                        <td class="border">FN<br><strong>${e[2]}</strong></td>
                        <td class="border">TP<br><strong>${e[0]}</strong></td>
                    </tr>
                </tbody>
            </table>
            `,r=t.querySelector("#confusion-table");if(r==null){const o=document.createElement("div");o.id="confusion-table",o.innerHTML=n,t.innerHTML="",t.appendChild(o);const s=document.createElement("div");s.id="training-log",s.className="text-xs whitespace-pre-wrap font-mono bg-white p-2 border rounded mt-4 max-h-48 overflow-y-auto",t.appendChild(s)}else r.innerHTML=n}}function On(t){const e=document.getElementById("training-log");I(e,T())||(e.innerHTML=e.innerHTML+t+"<br>")}function Pn(){const t=document.getElementById("perceptron-canvas"),e=t.getContext("2d"),n=l(0,E()),r=l(1,E());if(r!==0){const o=a=>-(n/r)*a-O()/r,s=a=>[(a[0]+1)/2*t.width,(1-(a[1]+1)/2)*t.height],i=s([-1,o(-1)]),c=s([1,o(1)]);e.beginPath(),e.moveTo(i[0],i[1]),e.lineTo(c[0],c[1]),e.strokeStyle="black",e.lineWidth=2,e.stroke()}}function nt(){let t,e;const n=document.getElementById("perceptron-canvas"),r=n.getContext("2d"),o=~~n.width|0,s=~~n.height|0;r.clearRect(0,0,n.width,n.height);const i=C(xt(0,4,o-1));try{for(;i["System.Collections.IEnumerator.MoveNext"]();){const a=i["System.Collections.Generic.IEnumerator`1.get_Current"]()|0,u=C(xt(0,4,s-1));try{for(;u["System.Collections.IEnumerator.MoveNext"]();){const h=u["System.Collections.Generic.IEnumerator`1.get_Current"]()|0,f=-(h/s*2-1),g=(a/o*2-1)*l(0,E())+f*l(1,E())+O(),w=1/(1+Math.exp(-g));r.fillStyle=w>=.5?X(Z("rgba(220,38,38,%.2f)"))(w):(t=1-w,X(Z("rgba(37,99,235,%.2f)"))(t)),r.fillRect(a,h,4,4)}}finally{N(u)}}}finally{N(i)}const c=C(D());try{for(;c["System.Collections.IEnumerator.MoveNext"]();){const a=c["System.Collections.Generic.IEnumerator`1.get_Current"](),u=(a.X+1)/2*n.width,h=(1-(a.Y+1)/2)*n.height;r.beginPath(),r.arc(u,h,5,0,2*3.141592653589793),r.fillStyle=(e=a.Class|0,e===0?"#2563eb":e===1?"#dc2626":"#000000"),r.fill()}}finally{N(c)}Pn()}class Ln extends at{constructor(e,n){super(),this.visited=e,this.walls=n}}function Zt(t,e){const n=qt(),r=F(t,m=>F(e,y=>new Ln(!1,[!0,!0,!0,!0]))),o=[[0,-1],[-1,0],[0,1],[1,0]],s=[[3,1],[0,2],[1,3],[2,0]],i=(m,y)=>{l(y,l(m,r)).visited=!0;const _=ke((d,p)=>[d,p[0],p[1]],Bt(d=>n.Next0(),o,{Compare:Ot}));for(let d=0;d<=_.length-1;d++){const p=l(d,_),S=p[0]|0,v=m+p[1]|0,V=y+p[2]|0;if(v>=0&&V>=0&&v<t&&V<e&&!l(V,l(v,r)).visited){const Kt=l(S,s);l(y,l(m,r)).walls[S]=!1,l(V,l(v,r)).walls[Kt[1]]=!1,i(v,V)}}};i(0,0);const c=F(t,m=>R(new Int32Array(e),0,e,-1)),a=Vt();et(a,[0,0]),l(0,c)[0]=0;let u=[0,0];for(;$t(a)>0;){const m=Wt(a),y=m[0]|0,_=m[1]|0;for(let d=0;d<=3;d++){const p=l(d,o),S=y+p[0]|0,v=_+p[1]|0;S>=0&&v>=0&&S<t&&v<e&&!l(d,l(_,l(y,r)).walls)&&l(v,l(S,c))===-1&&(l(S,c)[v]=l(_,l(y,c))+1|0,et(a,[S,v]),l(v,l(S,c))>l(u[1],l(u[0],c))&&(u=[S,v]))}}const h=t*2+1|0,f=F(h,m=>R(new Int32Array(h),0,h,1));for(let m=0;m<=t-1;m++)for(let y=0;y<=e-1;y++){const _=l(y,l(m,r)),d=m*2+1|0,p=y*2+1|0;l(d,f)[p]=0,l(0,_.walls)||(l(d-1,f)[p]=0),l(1,_.walls)||(l(d,f)[p+1]=0),l(2,_.walls)||(l(d+1,f)[p]=0),l(3,_.walls)||(l(d,f)[p-1]=0)}const g=[h-2,1],w=[u[0]*2+1,u[1]*2+1];return l(g[0],f)[g[1]]=0,l(w[0],f)[w[1]]=0,[f,g,w]}const bt=Zt(20,35),Bn=bt[1],Fn=bt[0],kn=bt[2];x(Fn);pt(Bn);gt(kn);function Xt(){const t=document.getElementById("maze-canvas"),e=t.getContext("2d"),n=x().length|0,r=l(0,x()).length|0,o=t.width/r;e.clearRect(0,0,t.width,t.height);for(let s=0;s<=n-1;s++)for(let i=0;i<=r-1;i++){const c=i*o,a=s*o;l(i,l(s,x()))===1?e.fillStyle="#000000":e.fillStyle="#ffffff",e.fillRect(c,a,o,o),e.strokeStyle="#cccccc",e.strokeRect(c,a,o,o)}e.fillStyle="limegreen",e.beginPath(),e.arc(o/2,o/2,o/3,0,2*3.141592653589793),e.fill()}function jn(t,e){const n=t.getContext("2d"),r=t.width/l(0,x()).length,o=s=>{if(s<Ht(e)){const i=Ke(s,e),c=i[1]*r+r/2,a=i[0]*r+r/2;n.fillStyle="limegreen",n.beginPath(),n.arc(c,a,r/4,0,2*3.141592653589793),n.fill(),window.setTimeout(()=>{o(s+1)},100)}};o(0)}function Hn(){if(tt())console.warn(z("Maze is currently being solved."));else{tt(!0);const t=document.getElementById("maze-canvas");t.getContext("2d");const e=x().length|0,n=l(0,x()).length|0,r=pt(),o=gt(),s=F(e,f=>R(new Array(n),0,n,!1)),i=F(e,f=>R(new Array(n),0,n,void 0)),c=Vt();et(c,r),l(r[0],s)[r[1]]=!0;const a=[[0,-1],[-1,0],[0,1],[1,0]],u=qt();let h=!1;for(;$t(c)>0&&!h;){const f=Wt(c),g=f[0]|0,w=f[1]|0,m=Bt(y=>u.Next0(),a,{Compare:Ot});for(let y=0;y<=m.length-1;y++){const _=l(y,m),d=g+_[0]|0,p=w+_[1]|0;d>=0&&p>=0&&d<e&&p<n&&l(p,l(d,x()))===0&&!l(p,l(d,s))&&(l(d,s)[p]=!0,l(d,i)[p]=[g,w],et(c,[d,p]),it([d,p],o)&&(h=!0))}}if(h){let f=$e(o),g=o;for(;!it(g,r);){const w=l(g[1],l(g[0],i));if(w==null)throw new Error("No path");{const m=w;f=jt(m,f),g=m}}jn(t,f),window.setTimeout(()=>{tt(!1)},Ht(f)*100+200)}else console.warn(z("No path found")),tt(!1)}}function zn(t,e,n){D(jt(new Tn(t,e,n),D())),nt(),K(),Y()}function Jt(t){let e,n,r,o=!1;const s=C(D());try{for(;s["System.Collections.IEnumerator.MoveNext"]();){const i=s["System.Collections.Generic.IEnumerator`1.get_Current"](),c=new Float64Array([i.X,i.Y]),a=i.Class-(l(0,c)*l(0,E())+l(1,c)*l(1,E())+O()>=0?1:0);if(a!==0){o=!0;const u=Qt();E()[0]=l(0,E())+u*a*l(0,c),E()[1]=l(1,E())+u*a*l(1,c),O(O()+u*a),On((e=u*a*l(0,c),n=u*a*l(1,c),r=u*a,X(Z("Epoch %d: Œîw0 = %.4f, Œîw1 = %.4f, Œîb = %.4f"))(t)(e)(n)(r)))}}}finally{N(s)}if(nt(),K(),Y(),o&&t<200)window.requestAnimationFrame(i=>{Jt(t+1)});else{const i=o?"Training stopped after 200 epochs with some errors.":"Training completed successfully without errors!";window.alert(z(i))}}function Rn(){if(W())Hn();else{const t=document.getElementById("training-log");I(t,T())||(t.innerHTML=""),Jt(0)}}function Dn(){const t=()=>Math.random()*2-1;E(new Float64Array([t(),t()])),O(t()),nt(),K(),Y()}function Gn(){if(W()){const t=Zt(20,35);x(t[0]),pt(t[1]),gt(t[2]),Xt()}else D(kt()),nt(),K(),Y()}function rt(t,e){const n=document.getElementById(t);n==null?console.warn(z(X(Z("Element with id '%s' not found"))(t))):n.addEventListener("click",r=>{e()})}function qn(){const t=document.getElementById("help-modal");if(!I(t,T()))t.classList.contains("hidden")?t.classList.remove("hidden"):t.classList.add("hidden");else{const n=document.getElementById("btn-help").getBoundingClientRect(),r=document.createElement("div");r.id="help-modal",r.className="absolute bg-white rounded p-6 shadow-lg border w-[32rem] z-50 text-sm leading-relaxed",r.setAttribute("style",`top:${n.bottom+10}px;left:${n.left-320}px;`),r.innerHTML=`\r
            <h2 class="text-xl font-semibold mb-3">About this Project</h2>\r
<p>This interactive project demonstrates two classic AI approaches in action:</p>\r
\r
<h3 class="font-semibold mt-4">üß† Perceptron Mode</h3>\r
<p>A perceptron is a basic neural unit that learns to separate 2D points into two classes using linear boundaries.</p>\r
<ul class="list-disc list-inside mt-1">\r
  <li>Click on canvas to add blue (Class 0) or red (Class 1) points</li>\r
  <li>Train the perceptron to learn the boundary</li>\r
  <li>The decision boundary is shown as a black line</li>\r
  <li>The background color indicates prediction confidence</li>\r
</ul>\r
\r
<h3 class="font-semibold mt-4">üß© Maze Mode</h3>\r
<p>In this mode, an agent uses Breadth-First Search (BFS) to solve a procedurally generated maze.</p>\r
<ul class="list-disc list-inside mt-1">\r
  <li>Click <b>Train</b> to start pathfinding</li>\r
  <li>The green dot animates as it finds the path</li>\r
  <li>All mazes are guaranteed to have one valid solution</li>\r
</ul>\r
\r
<h3 class="font-semibold mt-4">üõ†Ô∏è Tech Stack</h3>\r
<ul class="list-disc list-inside mt-1">\r
  <li>F# + Fable (compiled to JavaScript)</li>\r
  <li>HTML Canvas</li>\r
  <li>Tailwind CSS</li>\r
</ul>\r
\r
<p class="mt-4">Made by Dmitrii Drugov ‚Äì HFAA90</p>\r
<button id="close-help" class="mt-4 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700">Close</button>\r
\r
            `,document.body.appendChild(r),r.querySelector("#close-help").addEventListener("click",s=>{r.classList.add("hidden")})}}const Vn=Sn(t=>{zn(t[0],t[1],t[2])}),U=document.createElement("canvas");U.id="maze-canvas";(function(){U.setAttribute("width","600")})();(function(){U.setAttribute("height","400")})();U.className="hidden border rounded bg-white";const $n=In(),yt=Nn(),Wn=xn(),q=document.createElement("div");q.className="min-h-screen bg-gray-100 flex flex-col items-center gap-4 pt-10 max-w-screen-xl w-full mx-auto overflow-x-hidden";yt.appendChild(Vn);yt.appendChild(U);q.appendChild($n);const L=document.createElement("button");L.textContent="Switch to Maze Mode";L.className="bg-gray-200 px-4 py-2 rounded border shadow hover:bg-gray-300";L.id="btn-switch-mode";L.addEventListener("click",t=>{W(!W());const e=document.getElementById("perceptron-canvas"),n=document.getElementById("maze-canvas");W()?(L.textContent="Switch to Perceptron Mode",e.classList.add("hidden"),n.classList.remove("hidden"),Xt()):(L.textContent="Switch to Maze Mode",n.classList.add("hidden"),e.classList.remove("hidden"))});q.appendChild(L);q.appendChild(yt);q.appendChild(Wn);document.getElementById("root").appendChild(q);rt("btn-train",()=>{Rn()});rt("btn-reset",()=>{Gn()});rt("btn-random",()=>{Dn()});rt("btn-help",()=>{qn()});Mn();K();Y();
